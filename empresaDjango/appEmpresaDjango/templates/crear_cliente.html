{% extends 'base.html' %}
{% load static %}

{% block contenido %}
<div id="page">
    <div id = "page_text">
        <form onsubmit="return false;" id="formulario">
            {% csrf_token %}

            <h2>NUEVO CLIENTE</h2>

            <div class="columna1">
                <div id="formulario">
                    Nombre
                </div>
                <input class="formulario_input" type="text" id="nombre" name="nombre"><br>
            </div>
            <div><center><button onclick="Crearobj()">Crear cliente</button></center></div>
            <div><center><a href="{% url 'listaclientes' %}">Volver a la lista de clientes</a></center></div>
        </form>
    </div>
</div>
<script>
    function Crearobj() {
    var elnombre = document.getElementById("nombre").value;
     fetch('http://127.0.0.1:8000/appEmpresaDjango/clientes/', {
     method:"POST",
     headers: {
        'Content-Type' : 'application/json'
        },
        body : JSON.stringify({
            nombre : elnombre
            })
            })
            .then(response => response.json())
            .then(json => console.log(json))

        var para = document.createElement("p");
    var node = document.createTextNode("Se ha a√±adido el cliente");
    para.appendChild(node);
    var element = document.getElementById("page_text");
    element.appendChild(para);
    }
</script>
{% endblock %}